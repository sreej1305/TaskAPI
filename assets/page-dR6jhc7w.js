import"./index-BBR7LY95.js";import{r as i,o as e,p as k}from"./chunk-EPOLDU6W-D7CSg_Ns.js";import{c as f,R as T}from"./createLucideIcon-DvkGdfm2.js";import{_ as S}from"./style-BsQM2jEC.js";import{S as C}from"./shield-QXkXGhRt.js";import{M as P}from"./message-circle-Bw48UXDD.js";import{U as X,L as D}from"./users-BS_hqkSL.js";import{C as v}from"./circle-alert-Df0a2HXE.js";import{C as M}from"./circle-check-big-DMO2jWkI.js";if(typeof window<"u"){const t={};globalThis.process??={};const o=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,o),{get(a,s){return s in a?a[s]:void 0},has(){return!0}})}const E=f("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);if(typeof window<"u"){const t={};globalThis.process??={};const o=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,o),{get(a,s){return s in a?a[s]:void 0},has(){return!0}})}const _=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);if(typeof window<"u"){const t={};globalThis.process??={};const o=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,o),{get(a,s){return s in a?a[s]:void 0},has(){return!0}})}const $=f("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);if(typeof window<"u"){const t={};globalThis.process??={};const o=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,o),{get(a,s){return s in a?a[s]:void 0},has(){return!0}})}const L=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);if(typeof window<"u"){const t={};globalThis.process??={};const o=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,o),{get(a,s){return s in a?a[s]:void 0},has(){return!0}})}function I(){const[t,o]=i.useState(null),[a,s]=i.useState([]),[c,p]=i.useState(!0),[x,h]=i.useState(null),[g,u]=i.useState(!1),[n,d]=i.useState(null);i.useEffect(()=>{const r=localStorage.getItem("token"),l=localStorage.getItem("user");if(!r||!l){window.location.href="/login";return}o(JSON.parse(l)),m()},[]);const m=async()=>{try{const r=localStorage.getItem("token"),l=await fetch("/api/v1/tasks",{headers:{Authorization:`Bearer ${r}`}});if(!l.ok)throw new Error("Failed to fetch tasks");const w=await l.json();s(w.tasks)}catch(r){console.error("Fetch tasks error:",r),h(r.message)}finally{p(!1)}},y=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"},b=async r=>{if(confirm("Are you sure you want to delete this task?"))try{const l=localStorage.getItem("token");if(!(await fetch(`/api/v1/tasks/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}})).ok)throw new Error("Failed to delete task");m()}catch(l){console.error("Delete task error:",l),alert(l.message)}},j=r=>{switch(r){case"completed":return e.jsx(M,{className:"h-5 w-5 text-green-600"});case"in_progress":return e.jsx(E,{className:"h-5 w-5 text-blue-600"});default:return e.jsx(v,{className:"h-5 w-5 text-gray-400"})}},N=r=>{switch(r){case"high":return"bg-red-100 text-red-700";case"medium":return"bg-yellow-100 text-yellow-700";default:return"bg-green-100 text-green-700"}};return c?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 animate-spin rounded-full border-4 border-purple-200 border-t-purple-600"}),e.jsx("p",{className:"mt-4 text-lg font-semibold text-gray-600",children:"Loading..."})]})}):e.jsxs("div",{className:"jsx-951645121 min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[e.jsx("header",{className:"jsx-951645121 border-b border-white/20 bg-white/80 backdrop-blur-md shadow-lg",children:e.jsx("div",{className:"jsx-951645121 mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"jsx-951645121 flex items-center justify-between",children:[e.jsxs("div",{className:"jsx-951645121 group flex items-center gap-2 transition-transform hover:scale-105",children:[e.jsx("div",{className:"jsx-951645121 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 p-2 shadow-lg transition-all group-hover:shadow-xl",children:e.jsx(C,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"jsx-951645121 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-2xl font-bold text-transparent",children:"TaskAPI"})]}),e.jsxs("div",{className:"jsx-951645121 flex items-center gap-4",children:[e.jsxs("div",{className:"jsx-951645121 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 px-4 py-2 text-right shadow-md",children:[e.jsx("p",{className:"jsx-951645121 text-sm font-bold text-gray-900",children:t?.full_name||t?.email}),e.jsx("p",{className:"jsx-951645121 text-xs font-semibold capitalize text-purple-600",children:t?.role})]}),e.jsxs("a",{href:"/chat",className:"jsx-951645121 group flex items-center gap-2 rounded-xl border-2 border-[#FFB8D9] bg-gradient-to-r from-[#FFB8D9] to-[#E6CBF7] px-4 py-2 text-sm font-semibold text-white shadow-md transition-all hover:scale-105 hover:shadow-lg",children:[e.jsx(P,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),"Chat"]}),t?.role==="admin"&&e.jsxs("a",{href:"/admin",className:"jsx-951645121 group flex items-center gap-2 rounded-xl border-2 border-purple-200 bg-white px-4 py-2 text-sm font-semibold text-purple-700 shadow-md transition-all hover:scale-105 hover:border-purple-400 hover:bg-purple-50 hover:shadow-lg",children:[e.jsx(X,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),"Admin Panel"]}),e.jsxs("button",{onClick:y,className:"jsx-951645121 group flex items-center gap-2 rounded-xl border-2 border-gray-200 bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-md transition-all hover:scale-105 hover:border-red-300 hover:bg-red-50 hover:text-red-600 hover:shadow-lg",children:[e.jsx(D,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),"Logout"]})]})]})})}),e.jsxs("main",{className:"jsx-951645121 mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"jsx-951645121 mb-8 flex items-center justify-between",children:[e.jsxs("div",{className:"jsx-951645121",children:[e.jsx("h2",{className:"jsx-951645121 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-4xl font-black text-transparent",children:"My Tasks"}),e.jsx("p",{className:"jsx-951645121 mt-2 text-gray-600 font-medium",children:"Manage your tasks and track progress"})]}),e.jsxs("button",{onClick:()=>u(!0),className:"jsx-951645121 group flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-3 text-sm font-bold text-white shadow-xl transition-all hover:scale-110 hover:shadow-2xl",children:[e.jsx(_,{className:"h-5 w-5 transition-transform group-hover:rotate-90"}),"New Task"]})]}),x&&e.jsx("div",{className:"jsx-951645121 mb-6 animate-shake rounded-xl bg-gradient-to-r from-red-50 to-pink-50 border-2 border-red-200 p-4 shadow-lg",children:e.jsx("p",{className:"jsx-951645121 font-semibold text-red-700",children:x})}),a.length===0?e.jsxs("div",{className:"jsx-951645121 rounded-2xl border-2 border-dashed border-purple-300 bg-white p-16 text-center shadow-xl",children:[e.jsx("div",{className:"jsx-951645121 mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-blue-100 to-purple-100",children:e.jsx(v,{className:"h-10 w-10 text-purple-600"})}),e.jsx("p",{className:"jsx-951645121 text-lg font-semibold text-gray-600",children:"No tasks yet. Create your first task to get started!"})]}):e.jsx("div",{className:"jsx-951645121 grid gap-6",children:a.map((r,l)=>e.jsx("div",{style:{animationDelay:`${l*.1}s`},className:"jsx-951645121 group animate-slide-up rounded-2xl border-2 border-purple-100 bg-white p-6 shadow-xl transition-all hover:scale-102 hover:border-purple-300 hover:shadow-2xl",children:e.jsxs("div",{className:"jsx-951645121 flex items-start justify-between",children:[e.jsxs("div",{className:"jsx-951645121 flex-1",children:[e.jsxs("div",{className:"jsx-951645121 flex items-center gap-3",children:[e.jsx("div",{className:`jsx-951645121 rounded-full p-2 ${r.status==="completed"?"bg-green-100":r.status==="in_progress"?"bg-blue-100":"bg-gray-100"}`,children:j(r.status)}),e.jsx("h3",{className:"jsx-951645121 text-xl font-bold text-gray-900",children:r.title}),e.jsx("span",{className:`jsx-951645121 rounded-full px-3 py-1 text-xs font-bold shadow-md transition-all group-hover:scale-110 ${N(r.priority)}`,children:r.priority})]}),r.description&&e.jsx("p",{className:"jsx-951645121 mt-3 text-gray-600 font-medium",children:r.description}),e.jsxs("div",{className:"jsx-951645121 mt-4 flex items-center gap-4 text-sm font-semibold text-gray-500",children:[e.jsx("span",{className:"jsx-951645121 rounded-full bg-gray-100 px-3 py-1 capitalize",children:r.status.replace("_"," ")}),r.due_date&&e.jsxs("span",{className:"jsx-951645121 rounded-full bg-blue-100 px-3 py-1 text-blue-700",children:["Due: ",new Date(r.due_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"jsx-951645121 flex gap-2",children:[e.jsx("button",{onClick:()=>d(r),className:"jsx-951645121 group rounded-xl border-2 border-blue-200 bg-blue-50 p-3 text-blue-600 transition-all hover:scale-110 hover:border-blue-400 hover:bg-blue-100 hover:shadow-lg",children:e.jsx($,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>b(r.id),className:"jsx-951645121 group rounded-xl border-2 border-red-200 bg-red-50 p-3 text-red-600 transition-all hover:scale-110 hover:border-red-400 hover:bg-red-100 hover:shadow-lg",children:e.jsx(L,{className:"h-5 w-5"})})]})]})},r.id))})]}),(g||n)&&e.jsx(Y,{task:n,onClose:()=>{u(!1),d(null)},onSuccess:()=>{u(!1),d(null),m()}}),e.jsx(S,{id:"951645121",children:["@-webkit-keyframes shake-jsx-951645121{0%,100%{-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);}25%{-webkit-transform:translateX(-10px);-ms-transform:translateX(-10px);transform:translateX(-10px);}75%{-webkit-transform:translateX(10px);-ms-transform:translateX(10px);transform:translateX(10px);}}","@keyframes shake-jsx-951645121{0%,100%{-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);}25%{-webkit-transform:translateX(-10px);-ms-transform:translateX(-10px);transform:translateX(-10px);}75%{-webkit-transform:translateX(10px);-ms-transform:translateX(10px);transform:translateX(10px);}}","@-webkit-keyframes slide-up-jsx-951645121{from{opacity:0;-webkit-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}to{opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}}","@keyframes slide-up-jsx-951645121{from{opacity:0;-webkit-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}to{opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}}",".animate-shake.jsx-951645121{-webkit-animation:shake-jsx-951645121 0.5s ease-out;animation:shake-jsx-951645121 0.5s ease-out;}",".animate-slide-up.jsx-951645121{-webkit-animation:slide-up-jsx-951645121 0.5s ease-out forwards;animation:slide-up-jsx-951645121 0.5s ease-out forwards;opacity:0;}",".hover\\.jsx-951645121:scale-102.jsx-951645121:hover{-webkit-transform:scale(1.02);-ms-transform:scale(1.02);transform:scale(1.02);}"]})]})}function Y({task:t,onClose:o,onSuccess:a}){const[s,c]=i.useState({title:t?.title||"",description:t?.description||"",status:t?.status||"pending",priority:t?.priority||"medium",due_date:t?.due_date?new Date(t.due_date).toISOString().split("T")[0]:""}),[p,x]=i.useState(!1),[h,g]=i.useState(null),u=async n=>{n.preventDefault(),x(!0),g(null);try{const d=localStorage.getItem("token"),m=t?`/api/v1/tasks/${t.id}`:"/api/v1/tasks",b=await fetch(m,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(s)});if(!b.ok){const j=await b.json();throw new Error(j.error||"Failed to save task")}a()}catch(d){console.error("Save task error:",d),g(d.message)}finally{x(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-xl",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-gray-900",children:t?"Edit Task":"Create New Task"}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:s.title,onChange:n=>c({...s,title:n.target.value}),required:!0,className:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:n=>c({...s,description:n.target.value}),rows:3,className:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:s.status,onChange:n=>c({...s,status:n.target.value}),className:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),e.jsxs("select",{value:s.priority,onChange:n=>c({...s,priority:n.target.value}),className:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Due Date"}),e.jsx("input",{type:"date",value:s.due_date,onChange:n=>c({...s,due_date:n.target.value}),className:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h&&e.jsx("div",{className:"rounded-lg bg-red-50 p-3 text-sm text-red-700",children:h}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:o,className:"flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 font-medium text-gray-700 transition-colors hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:p?"Saving...":t?"Update":"Create"})]})]})]})})}if(typeof window<"u"){const t={};globalThis.process??={};const o=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,o),{get(a,s){return s in a?a[s]:void 0},has(){return!0}})}const R=k(function(o){return e.jsx(T,{children:e.jsx(I,{...o})})});export{R as default};
