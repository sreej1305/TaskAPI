import"./index-BBR7LY95.js";import{r as i,o as e,p as g}from"./chunk-EPOLDU6W-z78irOPe.js";import{R as u}from"./createLucideIcon-IHTiy8iX.js";import{S as b}from"./shield-C4UE4Bst.js";import{A as f}from"./arrow-left-BpC4av4g.js";import{L as j,U as y}from"./users-Brj2nohu.js";if(typeof window<"u"){const r={};globalThis.process??={};const a=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},r,a),{get(t,l){return l in t?t[l]:void 0},has(){return!0}})}function N(){const[r,a]=i.useState(null),[t,l]=i.useState([]),[d,x]=i.useState(!0),[c,m]=i.useState(null);i.useEffect(()=>{const s=localStorage.getItem("token"),n=localStorage.getItem("user");if(!s||!n){window.location.href="/login";return}const o=JSON.parse(n);if(a(o),o.role!=="admin"){alert("Access denied. Admin privileges required."),window.location.href="/dashboard";return}p()},[]);const p=async()=>{try{const s=localStorage.getItem("token"),n=await fetch("/api/v1/admin/users",{headers:{Authorization:`Bearer ${s}`}});if(!n.ok)throw new Error("Failed to fetch users");const o=await n.json();l(o.users)}catch(s){console.error("Fetch users error:",s),m(s.message)}finally{x(!1)}},h=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"};return d?e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx("div",{className:"text-gray-600",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("header",{className:"border-b bg-white/80 backdrop-blur-sm",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"TaskAPI Admin"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r?.full_name||r?.email}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:r?.role})]}),e.jsxs("a",{href:"/dashboard",className:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50",children:[e.jsx(f,{className:"h-4 w-4"}),"Dashboard"]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50",children:[e.jsx(j,{className:"h-4 w-4"}),"Logout"]})]})]})})}),e.jsxs("main",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"mt-1 text-gray-600",children:"View and manage all registered users"})]})]})}),c&&e.jsx("div",{className:"mb-6 rounded-lg bg-red-50 p-4 text-red-700",children:c}),e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700",children:"Full Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700",children:"Tasks"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700",children:"Created At"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-900",children:s.id}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-900",children:s.email}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-900",children:s.full_name||"-"}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${s.role==="admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:s.role})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-900",children:s.task_count}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})})}),e.jsxs("div",{className:"mt-6 rounded-xl border border-gray-200 bg-white p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Statistics"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg bg-blue-50 p-4",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Total Users"}),e.jsx("p",{className:"mt-1 text-3xl font-bold text-blue-900",children:t.length})]}),e.jsxs("div",{className:"rounded-lg bg-purple-50 p-4",children:[e.jsx("p",{className:"text-sm text-purple-700",children:"Admin Users"}),e.jsx("p",{className:"mt-1 text-3xl font-bold text-purple-900",children:t.filter(s=>s.role==="admin").length})]}),e.jsxs("div",{className:"rounded-lg bg-green-50 p-4",children:[e.jsx("p",{className:"text-sm text-green-700",children:"Total Tasks"}),e.jsx("p",{className:"mt-1 text-3xl font-bold text-green-900",children:t.reduce((s,n)=>s+n.task_count,0)})]})]})]})]})]})}if(typeof window<"u"){const r={};globalThis.process??={};const a=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},r,a),{get(t,l){return l in t?t[l]:void 0},has(){return!0}})}const L=g(function(a){return e.jsx(u,{children:e.jsx(N,{...a})})});export{L as default};
